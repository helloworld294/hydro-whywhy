(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-74597c67"],{"241c1":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("el-card",[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",{staticClass:"panel-title home-title"},[e._v(e._s(e.$t("m.Website_Config")))])]),t("el-form",{ref:"form",attrs:{"label-position":"left","label-width":"110px",model:e.websiteConfig}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{md:8,xs:24}},[t("el-form-item",{attrs:{label:e.$t("m.Base_Url"),required:""}},[t("el-input",{attrs:{placeholder:e.$t("m.Base_Url")},model:{value:e.websiteConfig.baseUrl,callback:function(t){e.$set(e.websiteConfig,"baseUrl",t)},expression:"websiteConfig.baseUrl"}})],1)],1),t("el-col",{attrs:{md:8,xs:24}},[t("el-form-item",{attrs:{label:e.$t("m.Web_Name"),required:""}},[t("el-input",{attrs:{placeholder:e.$t("m.Web_Name")},model:{value:e.websiteConfig.name,callback:function(t){e.$set(e.websiteConfig,"name",t)},expression:"websiteConfig.name"}})],1)],1),t("el-col",{attrs:{md:8,xs:24}},[t("el-form-item",{attrs:{label:e.$t("m.Short_Name"),required:""}},[t("el-input",{attrs:{placeholder:e.$t("m.Short_Name")},model:{value:e.websiteConfig.shortName,callback:function(t){e.$set(e.websiteConfig,"shortName",t)},expression:"websiteConfig.shortName"}})],1)],1),t("el-col",{attrs:{md:12,xs:24}},[t("el-form-item",{attrs:{label:e.$t("m.Record_Name"),required:""}},[t("el-input",{attrs:{placeholder:e.$t("m.Record_Name")},model:{value:e.websiteConfig.recordName,callback:function(t){e.$set(e.websiteConfig,"recordName",t)},expression:"websiteConfig.recordName"}})],1)],1),t("el-col",{attrs:{md:12,xs:24}},[t("el-form-item",{attrs:{label:e.$t("m.Record_Url"),required:""}},[t("el-input",{attrs:{placeholder:e.$t("m.Record_Url")},model:{value:e.websiteConfig.recordUrl,callback:function(t){e.$set(e.websiteConfig,"recordUrl",t)},expression:"websiteConfig.recordUrl"}})],1)],1),t("el-col",{attrs:{md:12,xs:24}},[t("el-form-item",{attrs:{label:e.$t("m.Project_Name"),required:""}},[t("el-input",{attrs:{placeholder:e.$t("m.Project_Name")},model:{value:e.websiteConfig.projectName,callback:function(t){e.$set(e.websiteConfig,"projectName",t)},expression:"websiteConfig.projectName"}})],1)],1),t("el-col",{attrs:{md:12,xs:24}},[t("el-form-item",{attrs:{label:e.$t("m.Project_Url"),required:""}},[t("el-input",{attrs:{placeholder:e.$t("m.Project_Url")},model:{value:e.websiteConfig.projectUrl,callback:function(t){e.$set(e.websiteConfig,"projectUrl",t)},expression:"websiteConfig.projectUrl"}})],1)],1),t("el-col",{attrs:{md:24,xs:24}},[t("el-form-item",{attrs:{label:e.$t("m.Web_Desc"),required:""}},[t("el-input",{attrs:{type:"textarea",placeholder:e.$t("m.Web_Desc"),maxlength:"150","show-word-limit":""},model:{value:e.websiteConfig.description,callback:function(t){e.$set(e.websiteConfig,"description",t)},expression:"websiteConfig.description"}})],1)],1),t("el-col",{attrs:{md:24,xs:24}},[t("el-form-item",{attrs:{label:e.$t("m.Allow_Register"),"label-width":"120px"}},[t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.websiteConfig.register,callback:function(t){e.$set(e.websiteConfig,"register",t)},expression:"websiteConfig.register"}})],1)],1)],1)],1),t("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(t){return e.saveWebsiteConfig.apply(null,arguments)}}},[e._v(e._s(e.$t("m.Save")))])],1),t("el-card",{staticStyle:{"margin-top":"15px"}},[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",{staticClass:"panel-title home-title"},[e._v(e._s(e.$t("m.Home_Rotation_Chart")))])]),t("ul",{staticClass:"el-upload-list el-upload-list--picture-card"},e._l(e.carouselImgList,(function(a,s){return t("li",{key:s,staticClass:"el-upload-list__item is-ready",attrs:{tabindex:"0"}},[t("div",[t("img",{staticClass:"el-upload-list__item-thumbnail",staticStyle:{height:"146px",width:"146x"},attrs:{src:a.url,alt:"load faild"}}),t("span",{staticClass:"el-upload-list__item-actions"},[t("span",{staticClass:"el-upload-list__item-preview",on:{click:function(t){return e.handlePictureCardPreview(a)}}},[t("i",{staticClass:"el-icon-zoom-in"})]),e.disabled?e._e():t("span",{staticClass:"el-upload-list__item-delete",on:{click:function(t){return e.handleDownload(a)}}},[t("i",{staticClass:"el-icon-download"})]),e.disabled?e._e():t("span",{staticClass:"el-upload-list__item-delete",on:{click:function(t){return e.handleRemove(a,s)}}},[t("i",{staticClass:"el-icon-delete"})])])])])})),0),t("el-upload",{staticStyle:{display:"inline"},attrs:{action:"/api/file/upload-carouse-img","list-type":"picture-card",accept:"image/gif,image/jpeg,image/jpg,image/png,image/svg,image/jfif,image/webp","on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove}},[t("i",{staticClass:"el-icon-plus"})]),t("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})]),t("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1),t("el-card",{staticStyle:{"margin-top":"15px"}},[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",{staticClass:"panel-title home-title"},[e._v(e._s(e.$t("m.SMTP_Config")))])]),t("el-form",{attrs:{"label-position":"left","label-width":"80px",model:e.smtp}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{md:24,xs:24}},[t("el-form-item",{attrs:{label:e.$t("m.Host"),required:"","label-width":"80px"}},[t("el-input",{attrs:{placeholder:e.$t("m.Host")},model:{value:e.smtp.emailHost,callback:function(t){e.$set(e.smtp,"emailHost",t)},expression:"smtp.emailHost"}})],1)],1),t("el-col",{attrs:{md:24,xs:24}},[t("el-form-item",{attrs:{label:e.$t("m.Port"),required:"","label-width":"80px"}},[t("el-input",{attrs:{type:"number",placeholder:e.$t("m.Port")},model:{value:e.smtp.emailPort,callback:function(t){e.$set(e.smtp,"emailPort",t)},expression:"smtp.emailPort"}})],1)],1),t("el-col",{attrs:{md:12,xs:24}},[t("el-form-item",{attrs:{label:e.$t("m.Email"),required:"","label-width":"80px"}},[t("el-input",{attrs:{placeholder:e.$t("m.Email")},model:{value:e.smtp.emailUsername,callback:function(t){e.$set(e.smtp,"emailUsername",t)},expression:"smtp.emailUsername"}})],1)],1),t("el-col",{attrs:{md:12,xs:24}},[t("el-form-item",{attrs:{label:e.$t("m.Password"),"label-width":"80px",required:""}},[t("el-input",{attrs:{type:"password",placeholder:e.$t("m.Password")},model:{value:e.smtp.emailPassword,callback:function(t){e.$set(e.smtp,"emailPassword",t)},expression:"smtp.emailPassword"}})],1)],1),t("el-col",{attrs:{md:24,xs:24}},[t("el-form-item",{attrs:{label:e.$t("m.Email_BG"),"label-width":"80px",required:""}},[t("el-input",{attrs:{placeholder:e.$t("m.Email_BG_Desc")},model:{value:e.smtp.emailBGImg,callback:function(t){e.$set(e.smtp,"emailBGImg",t)},expression:"smtp.emailBGImg"}})],1)],1),t("el-col",{attrs:{md:24,xs:24}},[t("el-form-item",{attrs:{label:"SSL"}},[t("el-switch",{model:{value:e.smtp.emailSsl,callback:function(t){e.$set(e.smtp,"emailSsl",t)},expression:"smtp.emailSsl"}})],1)],1)],1)],1),t("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(t){return e.saveSMTPConfig.apply(null,arguments)}}},[e._v(e._s(e.$t("m.Save")))]),e.saved?t("el-button",{attrs:{type:"warning",loading:e.loadingBtnTest,size:"small"},nativeOn:{click:function(t){return e.testSMTPConfig.apply(null,arguments)}}},[e._v(e._s(e.$t("m.Send_Test_Email")))]):e._e()],1),t("el-card",{staticStyle:{"margin-top":"15px"}},[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",{staticClass:"panel-title home-title"},[e._v(e._s(e.$t("m.DataSource_Config")))])]),t("el-form",{attrs:{"label-position":"top",model:e.databaseConfig}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{md:12,xs:24}},[t("el-form-item",{attrs:{label:"MySQL "+e.$t("m.Host"),required:"","label-width":"80px"}},[t("el-input",{attrs:{placeholder:"MySQL "+e.$t("m.Host")},model:{value:e.databaseConfig.dbHost,callback:function(t){e.$set(e.databaseConfig,"dbHost",t)},expression:"databaseConfig.dbHost"}})],1)],1),t("el-col",{attrs:{md:12,xs:24}},[t("el-form-item",{attrs:{label:"MySQL "+e.$t("m.Port"),required:"","label-width":"80px"}},[t("el-input",{attrs:{type:"number",placeholder:"MySQL "+e.$t("m.Port")},model:{value:e.databaseConfig.dbPort,callback:function(t){e.$set(e.databaseConfig,"dbPort",t)},expression:"databaseConfig.dbPort"}})],1)],1),t("el-col",{attrs:{md:12,xs:24}},[t("el-form-item",{attrs:{label:"MySQL "+e.$t("m.Username"),required:"","label-width":"80px"}},[t("el-input",{attrs:{placeholder:"MySQL "+e.$t("m.Username")},model:{value:e.databaseConfig.dbUsername,callback:function(t){e.$set(e.databaseConfig,"dbUsername",t)},expression:"databaseConfig.dbUsername"}})],1)],1),t("el-col",{attrs:{md:12,xs:24}},[t("el-form-item",{attrs:{label:"MySQL "+e.$t("m.Password"),"label-width":"80px",required:""}},[t("el-input",{attrs:{type:"password",placeholder:"MySQL "+e.$t("m.Password")},model:{value:e.databaseConfig.dbPassword,callback:function(t){e.$set(e.databaseConfig,"dbPassword",t)},expression:"databaseConfig.dbPassword"}})],1)],1),t("el-col",{attrs:{md:8,xs:24}},[t("el-form-item",{attrs:{label:"Redis "+e.$t("m.Host"),"label-width":"80px",required:""}},[t("el-input",{attrs:{placeholder:"Redis "+e.$t("m.Host")},model:{value:e.databaseConfig.redisHost,callback:function(t){e.$set(e.databaseConfig,"redisHost",t)},expression:"databaseConfig.redisHost"}})],1)],1),t("el-col",{attrs:{md:8,xs:24}},[t("el-form-item",{attrs:{label:"Redis "+e.$t("m.Port"),"label-width":"80px",required:""}},[t("el-input",{attrs:{type:"number",placeholder:"Redis "+e.$t("m.Port")},model:{value:e.databaseConfig.redisPort,callback:function(t){e.$set(e.databaseConfig,"redisPort",t)},expression:"databaseConfig.redisPort"}})],1)],1),t("el-col",{attrs:{md:8,xs:24}},[t("el-form-item",{attrs:{label:"Redis "+e.$t("m.Password"),"label-width":"80px",required:""}},[t("el-input",{attrs:{type:"password",placeholder:"Redis "+e.$t("m.Password")},model:{value:e.databaseConfig.redisPassword,callback:function(t){e.$set(e.databaseConfig,"redisPassword",t)},expression:"databaseConfig.redisPassword"}})],1)],1)],1)],1),t("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(t){return e.saveDataBaseConfig.apply(null,arguments)}}},[e._v(e._s(e.$t("m.Save")))])],1)],1)},l=[],i=a("3228"),o=a("7aa9"),r=a("90b9"),n={name:"SystemConfig",data(){return{init:!1,saved:!1,loadingBtnTest:!1,smtp:{emailHost:"smtp.example.com",emailPassword:"",emailPort:587,emailBGImg:"",emailUsername:"email@example.com",emailSsl:!0},websiteConfig:{},databaseConfig:{},dialogImageUrl:"",dialogVisible:!1,disabled:!1,carouselImgList:[]}},mounted(){i["a"].admin_getSMTPConfig().then(e=>{e.data.data?this.smtp=e.data.data:(this.init=!0,o["a"].warning("No STMP Config"))}),i["a"].getHomeCarousel().then(e=>{this.carouselImgList=e.data.data}),i["a"].admin_getWebsiteConfig().then(e=>{this.websiteConfig=e.data.data}).catch(()=>{}),i["a"].admin_getDataBaseConfig().then(e=>{this.databaseConfig=e.data.data}).catch(()=>{})},methods:{handleRemove(e,t){let a=e.id;null!=e.response&&(a=e.response.data.id),i["a"].admin_deleteHomeCarousel(a).then(e=>{o["a"].success(this.$i18n.t("m.Delete_successfully")),void 0!=t&&this.carouselImgList.splice(t,1)})},handlePictureCardPreview(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleDownload(e){r["a"].downloadFile(e.url)},saveSMTPConfig(){i["a"].admin_editSMTPConfig(this.smtp).then(e=>{o["a"].success(this.$i18n.t("m.Update_Successfully")),this.saved=!0},()=>{this.saved=!1})},testSMTPConfig(){this.$prompt(this.$i18n.t("m.Please_input_your_email"),"",{inputPattern:/[\w!#$%&'*+/=?^_`{|}~-]+(?:\.[\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?/,inputErrorMessage:this.$i18n.t("m.Email_Check_Format")}).then(({value:e})=>{this.loadingBtnTest=!0,i["a"].admin_testSMTPConfig(e).then(e=>{o["a"].success(this.$i18n.t("m.Send_successfully")),this.loadingBtnTest=!1},()=>{this.loadingBtnTest=!1})}).catch(()=>{})},saveWebsiteConfig(){for(var e in this.websiteConfig)"register"!=e&&(null!=this.websiteConfig[e]&&this.websiteConfig[e].replace(/(^\s*)|(\s*$)/g,"")||(this.websiteConfig[e]="None"));i["a"].admin_editWebsiteConfig(this.websiteConfig).then(e=>{o["a"].success(this.$i18n.t("m.Update_Successfully"))}).catch(()=>{})},saveDataBaseConfig(){i["a"].admin_editDataBaseConfig(this.databaseConfig).then(e=>{o["a"].success(this.$i18n.t("m.Update_Successfully"))}).catch(()=>{})}}},d=n,m=a("2877"),c=Object(m["a"])(d,s,l,!1,null,null,null);t["default"]=c.exports}}]);