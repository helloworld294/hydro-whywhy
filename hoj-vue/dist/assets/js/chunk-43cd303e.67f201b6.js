(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-43cd303e"],{"20d2":function(t,e,i){"use strict";i("3283")},"22a2":function(t,e,i){"use strict";var n=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{"text-align":"center"}},[void 0!=t.contest.type?e("div",{staticStyle:{"margin-bottom":"10px"}},[e("span",{staticClass:"tips"},[t._v(t._s(0==t.contest.type?t.$t("m.ACM_Contest_Add_From_Public_Problem_Tips"):t.$t("m.OI_Contest_Add_From_Public_Problem_Tips")))])]):t._e(),e("vxe-input",{staticStyle:{"margin-bottom":"10px"},attrs:{placeholder:t.$t("m.Enter_keyword"),type:"search",size:"medium"},on:{"search-click":t.filterByKeyword},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterByKeyword.apply(null,arguments)}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),e("vxe-table",{attrs:{data:t.problems,loading:t.loading,"auto-resize":"",stripe:"",align:"center"}},[e("vxe-table-column",{attrs:{title:"ID","min-width":"100",field:"problemId"}}),e("vxe-table-column",{attrs:{"min-width":"150",title:t.$t("m.Title"),field:"title"}}),e("vxe-table-column",{attrs:{title:t.$t("m.Option"),align:"center","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function({row:i}){return[e("el-tooltip",{attrs:{effect:"dark",content:t.$t("m.Add"),placement:"top"}},[e("el-button",{attrs:{icon:"el-icon-plus",size:"mini",type:"primary"},nativeOn:{click:function(e){return t.handleAddProblem(i.id,i.problemId)}}})],1)]}}])})],1),e("el-pagination",{staticClass:"page",attrs:{layout:"prev, pager, next","page-size":t.limit,"current-page":t.page,total:t.total},on:{"current-change":t.getPublicProblem,"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e}}})],1)},a=[],l=i("3228"),o=i("7aa9"),r={name:"add-problem-from-public",props:["contestID","trainingID"],data(){return{page:1,limit:10,total:0,loading:!1,problems:[],contest:{},keyword:""}},mounted(){this.contestID?l["a"].admin_getContest(this.contestID).then(t=>{this.contest=t.data.data,this.getPublicProblem(1)}).catch(()=>{}):this.trainingID&&this.getPublicProblem(1)},methods:{getPublicProblem(t){this.loading=!0;let e={keyword:this.keyword,currentPage:t,limit:this.limit,problemType:this.contest.type,cid:this.contest.id,tid:this.trainingID},i=null;this.contestID?i="admin_getContestProblemList":this.trainingID&&(i="admin_getTrainingProblemList"),l["a"][i](e).then(t=>{this.loading=!1,this.total=t.data.data.problemList.total,this.problems=t.data.data.problemList.records}).catch(()=>{this.loading=!1})},handleAddProblem(t,e){if(this.contestID)this.$prompt(this.$i18n.t("m.Enter_The_Problem_Display_ID_in_the_Contest"),"Tips").then(({value:e})=>{let i={pid:t,cid:this.contestID,displayId:e};l["a"].admin_addContestProblemFromPublic(i).then(t=>{this.$emit("on-change"),o["a"].success(this.$i18n.t("m.Add_Successfully")),this.getPublicProblem(this.page)},()=>{})},()=>{});else{let i={pid:t,tid:this.trainingID,displayId:e};l["a"].admin_addTrainingProblemFromPublic(i).then(t=>{this.$emit("on-change"),o["a"].success(this.$i18n.t("m.Add_Successfully")),this.getPublicProblem(this.page)},()=>{})}},filterByKeyword(){this.page=1,this.getPublicProblem(this.page)}}},s=r,d=(i("f142"),i("2877")),m=Object(d["a"])(s,n,a,!1,null,"2c306d64",null);e["a"]=m.exports},3283:function(t,e,i){},"698c":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t._self._c;return e("div",[e("el-card",[e("div",{attrs:{slot:"header"},slot:"header"},[e("span",{staticClass:"panel-title home-title"},[t._v(t._s(t.$t("m.Training_Problem_List")))]),e("div",{staticClass:"filter-row"},[e("span",[e("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:function(e){t.addProblemDialogVisible=!0}}},[t._v(t._s(t.$t("m.Add_From_Public_Problem"))+" ")])],1),e("span",[e("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-plus"},on:{click:function(e){t.AddRemoteOJProblemDialogVisible=!0}}},[t._v(t._s(t.$t("m.Add_Rmote_OJ_Problem"))+" ")])],1),e("span",[e("vxe-input",{attrs:{placeholder:t.$t("m.Enter_keyword"),type:"search",size:"medium"},on:{"search-click":t.filterByKeyword},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterByKeyword.apply(null,arguments)}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1)])]),e("vxe-table",{ref:"adminProblemList",attrs:{stripe:"","auto-resize":"",data:t.problemList,loading:t.loading,align:"center"}},[e("vxe-table-column",{attrs:{"min-width":"64",field:"id",title:"ID"}}),e("vxe-table-column",{attrs:{"min-width":"100",field:"problemId",title:t.$t("m.Display_ID")}}),e("vxe-table-column",{attrs:{field:"title","min-width":"150",title:t.$t("m.Title"),"show-overflow":""}}),e("vxe-table-column",{attrs:{field:"author","min-width":"100",title:t.$t("m.Author"),"show-overflow":""}}),e("vxe-table-column",{attrs:{"min-width":"200",title:t.$t("m.Training_Problem_Rank")},scopedSlots:t._u([{key:"default",fn:function({row:i}){return[e("el-input-number",{attrs:{min:0,max:2147483647},on:{change:function(e){return t.handleChangeRank(t.trainingProblemMap[i.id])}},model:{value:t.trainingProblemMap[i.id].rank,callback:function(e){t.$set(t.trainingProblemMap[i.id],"rank",e)},expression:"trainingProblemMap[row.id].rank"}})]}}])}),e("vxe-table-column",{attrs:{"min-width":"120",title:t.$t("m.Auth")},scopedSlots:t._u([{key:"default",fn:function({row:i}){return[e("el-select",{attrs:{disabled:!t.isSuperAdmin&&!t.isProblemAdmin,size:"small"},on:{change:function(e){return t.changeProblemAuth(i)}},model:{value:i.auth,callback:function(e){t.$set(i,"auth",e)},expression:"row.auth"}},[e("el-option",{attrs:{label:t.$t("m.Public_Problem"),value:1,disabled:!t.isSuperAdmin&&!t.isProblemAdmin}}),e("el-option",{attrs:{label:t.$t("m.Private_Problem"),value:2}}),e("el-option",{attrs:{label:t.$t("m.Contest_Problem"),value:3,disabled:!0}})],1)]}}])}),e("vxe-table-column",{attrs:{title:"Option","min-width":"200"},scopedSlots:t._u([{key:"default",fn:function({row:i}){return[t.isSuperAdmin||t.isProblemAdmin||i.author==t.userInfo.username?e("el-tooltip",{attrs:{effect:"dark",content:t.$t("m.Edit"),placement:"top"}},[e("el-button",{attrs:{icon:"el-icon-edit-outline",size:"mini",type:"primary"},nativeOn:{click:function(e){return t.goEdit(i.id)}}})],1):t._e(),t.isSuperAdmin||t.isProblemAdmin?e("el-tooltip",{attrs:{effect:"dark",content:t.$t("m.Download_Testcase"),placement:"top"}},[e("el-button",{attrs:{icon:"el-icon-download",size:"mini",type:"success"},nativeOn:{click:function(e){return t.downloadTestCase(i.id)}}})],1):t._e(),e("el-tooltip",{attrs:{effect:"dark",content:t.$t("m.Remove"),placement:"top"}},[e("el-button",{attrs:{icon:"el-icon-close",size:"mini",type:"warning"},nativeOn:{click:function(e){return t.removeProblem(i.id)}}})],1),t.isSuperAdmin||t.isProblemAdmin?e("el-tooltip",{attrs:{effect:"dark",content:t.$t("m.Delete"),placement:"top"}},[e("el-button",{attrs:{icon:"el-icon-delete-solid",size:"mini",type:"danger"},nativeOn:{click:function(e){return t.deleteProblem(i.id)}}})],1):t._e()]}}])})],1),e("div",{staticClass:"panel-options"},[e("el-pagination",{staticClass:"page",attrs:{layout:"prev, pager, next, sizes","page-size":t.pageSize,total:t.total,"page-sizes":[10,30,50,100]},on:{"current-change":t.currentChange,"size-change":t.onPageSizeChange}})],1)],1),e("el-dialog",{attrs:{title:t.$t("m.Add_Training_Problem"),width:"90%",visible:t.addProblemDialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.addProblemDialogVisible=e}}},[e("AddPublicProblem",{attrs:{trainingID:t.trainingId},on:{"on-change":t.getProblemList}})],1),e("el-dialog",{attrs:{title:t.$t("m.Add_Rmote_OJ_Problem"),width:"350px",visible:t.AddRemoteOJProblemDialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.AddRemoteOJProblemDialogVisible=e}}},[e("el-form",[e("el-form-item",{attrs:{label:t.$t("m.Remote_OJ")}},[e("el-select",{attrs:{size:"small"},model:{value:t.otherOJName,callback:function(e){t.otherOJName=e},expression:"otherOJName"}},t._l(t.REMOTE_OJ,(function(t,i){return e("el-option",{key:i,attrs:{label:t.name,value:t.key}})})),1)],1),e("el-form-item",{attrs:{label:t.$t("m.Problem_ID"),required:""}},[e("el-input",{attrs:{size:"small"},model:{value:t.otherOJProblemId,callback:function(e){t.otherOJProblemId=e},expression:"otherOJProblemId"}})],1),e("el-form-item",{staticStyle:{"text-align":"center"}},[e("el-button",{attrs:{type:"primary",icon:"el-icon-plus",loading:t.addRemoteOJproblemLoading},on:{click:t.addRemoteOJProblem}},[t._v(t._s(t.$t("m.Add"))+" ")])],1)],1)],1)],1)},a=[],l=(i("14d9"),i("3228")),o=i("22a2"),r=i("7aa9"),s=i("9a36"),d=i("2f62"),m=i("90b9"),c={name:"ProblemList",components:{AddPublicProblem:o["a"]},data(){return{problemListAuth:0,oj:"All",pageSize:10,total:0,problemList:[],trainingProblemMap:{},keyword:"",loading:!1,currentPage:1,routeName:"",trainingId:"",currentProblemID:"",currentRow:{},addProblemDialogVisible:!1,AddRemoteOJProblemDialogVisible:!1,addRemoteOJproblemLoading:!1,otherOJName:"HDU",otherOJProblemId:"",REMOTE_OJ:{},displayId:""}},mounted(){this.init()},computed:{...Object(d["c"])(["userInfo","isSuperAdmin","isProblemAdmin"])},methods:{init(){this.routeName=this.$route.name,this.trainingId=this.$route.params.trainingId,this.getProblemList(this.currentPage),this.REMOTE_OJ=Object.assign({},s["l"])},goEdit(t){this.$router.push({name:"admin-edit-problem",params:{problemId:t}})},currentChange(t){this.currentPage=t,this.getProblemList(t)},onPageSizeChange(t){this.pageSize=t,this.getProblemList(this.currentPage)},getProblemList(t=1){this.loading=!0;let e={limit:this.pageSize,currentPage:t,keyword:this.keyword,tid:this.trainingId,queryExisted:!0};0!=this.problemListAuth&&(e["auth"]=this.problemListAuth),l["a"].admin_getTrainingProblemList(e).then(t=>{this.loading=!1,this.total=t.data.data.problemList.total,this.problemList=t.data.data.problemList.records,this.trainingProblemMap=t.data.data.trainingProblemMap},t=>{this.loading=!1})},handleChangeRank(t){l["a"].admin_updateTrainingProblem(t).then(t=>{r["a"].success(this.$i18n.t("m.Update_Successfully")),this.getProblemList(1)})},changeProblemAuth(t){l["a"].admin_changeProblemAuth(t).then(t=>{r["a"].success(this.$i18n.t("m.Update_Successfully"))})},deleteProblem(t){this.$confirm(this.$i18n.t("m.Delete_Problem_Tips"),"Tips",{type:"warning"}).then(()=>{l["a"].admin_deleteTrainingProblem(t,null).then(t=>{r["a"].success(this.$i18n.t("m.Delete_successfully")),this.getProblemList(this.currentPage)}).catch(()=>{})},()=>{})},removeProblem(t){this.$confirm(this.$i18n.t("m.Remove_Training_Problem_Tips"),"Tips",{type:"warning"}).then(()=>{l["a"].admin_deleteTrainingProblem(t,this.trainingId).then(t=>{r["a"].success("success"),this.getProblemList(this.currentPage)}).catch(()=>{})},()=>{})},downloadTestCase(t){let e="/api/file/download-testcase?pid="+t;m["a"].downloadFile(e).then(()=>{this.$alert(this.$i18n.t("m.Download_Testcase_Success"),"Tips")})},filterByKeyword(){this.currentChange(1)},addRemoteOJProblem(){this.otherOJProblemId?(this.addRemoteOJproblemLoading=!0,l["a"].admin_addTrainingRemoteOJProblem(this.otherOJName,this.otherOJProblemId,this.trainingId).then(t=>{this.addRemoteOJproblemLoading=!1,this.AddRemoteOJProblemDialogVisible=!1,r["a"].success(this.$i18n.t("m.Add_Successfully")),this.currentChange(1)},t=>{this.addRemoteOJproblemLoading=!1})):r["a"].error(this.$i18n.t("m.Problem_ID_is_required"))}},watch:{$route(t,e){t.params.trainingId==e.params.trainingId&&t.name==e.name||this.init()}}},u=c,p=(i("20d2"),i("2877")),h=Object(p["a"])(u,n,a,!1,null,"71a09eac",null);e["default"]=h.exports},"9b81":function(t,e,i){},f142:function(t,e,i){"use strict";i("9b81")}}]);