"use strict";(self["webpackChunkhoj_vue"]=self["webpackChunkhoj_vue"]||[]).push([[592],{10592:function(i,t,a){a.r(t),a.d(t,{default:function(){return u}});var s=function(){var i=this,t=i._self._c;return t("div",[t("el-card",[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",{staticClass:"panel-title home-title"},[i._v(i._s(i.$t("m.Admin_Tag")))]),t("div",{staticClass:"filter"},[t("span",[t("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:function(t){return i.openTagDialog("add",null)}}},[i._v(i._s(i.$t("m.Add_Tag"))+" ")])],1),t("span",[t("el-button",{attrs:{type:"warning",size:"small",icon:"el-icon-plus"},on:{click:function(t){return i.openTagClassificationDialog("add",null)}}},[i._v(i._s(i.$t("m.Add_Tag_Classification"))+" ")])],1),t("span",[t("el-select",{staticStyle:{width:"150px","margin-top":"10px"},attrs:{size:"small"},on:{change:i.init},model:{value:i.tagOj,callback:function(t){i.tagOj=t},expression:"tagOj"}},[t("el-option",{attrs:{label:i.$t("m.My_OJ"),value:"ME"}}),i._l(i.REMOTE_OJ,function(i,a){return t("el-option",{key:a,attrs:{label:i.name,value:i.key}})})],2)],1)])]),t("h3",{staticStyle:{margin:"-5px"}},[i._v(i._s(i.$t("m.Tag_Tips")))])]),t("div",{directives:[{name:"loading",rawName:"v-loading",value:i.getTagListLoading,expression:"getTagListLoading"}]},[t("el-row",{attrs:{gutter:20}},i._l(i.tagsAndClassificationList,function(a,s){return t("el-col",{key:s,attrs:{md:8,xs:24}},[t("el-card",{staticStyle:{"margin-top":"15px"}},[t("el-collapse",{model:{value:i.activeTagClassificationIdList,callback:function(t){i.activeTagClassificationIdList=t},expression:"activeTagClassificationIdList"}},[t("el-collapse-item",{attrs:{name:null==a.classification?-1:a.classification.id}},[t("template",{slot:"title"},[t("span",[i._v(i._s(null!=a.classification?a.classification.name:i.$t("m.Unclassified"))+" ")]),null!=a.classification?t("span",{staticStyle:{"margin-left":"10px"}},[t("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"mini"},on:{click:function(t){return t.stopPropagation(),i.openTagClassificationDialog("update",a.classification)}}})],1):i._e(),null!=a.classification?t("span",{staticStyle:{"margin-left":"10px"}},[t("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(t){return t.stopPropagation(),i.deleteTagClassification(a.classification)}}})],1):i._e()]),t("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(t){return i.openTagDialog("add",null,a.classification)}}},[i._v("+ "+i._s(i.$t("m.Add_Tag")))]),i._l(a.tagList,function(a,s){return t("el-tag",{key:s,staticClass:"tag",attrs:{closable:"",color:a.color?a.color:"#409eff",effect:"dark","disable-transitions":!1},on:{close:function(t){return i.deleteTag(a)},click:function(t){return i.openTagDialog("update",a)}}},[i._v(" "+i._s(a.name)+" ")])})],2)],1)],1)],1)}),1)],1),t("el-dialog",{attrs:{title:i.$t("m."+i.upsertTagTitle),width:"350px",visible:i.addTagDialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){i.addTagDialogVisible=t}}},[t("el-form",[t("el-form-item",{attrs:{label:i.$t("m.Tag_Name"),required:""}},[t("el-input",{attrs:{size:"small"},model:{value:i.tag.name,callback:function(t){i.$set(i.tag,"name",t)},expression:"tag.name"}})],1),t("el-form-item",{attrs:{label:i.$t("m.Tag_Color"),required:""}},[t("el-color-picker",{model:{value:i.tag.color,callback:function(t){i.$set(i.tag,"color",t)},expression:"tag.color"}})],1),t("el-form-item",{attrs:{label:i.$t("m.Tag_Attribution"),required:""}},[t("el-select",{staticStyle:{width:"150px"},attrs:{size:"small"},model:{value:i.tag.oj,callback:function(t){i.$set(i.tag,"oj",t)},expression:"tag.oj"}},[t("el-option",{attrs:{label:i.$t("m.My_OJ"),value:"ME"}}),i._l(i.REMOTE_OJ,function(i,a){return t("el-option",{key:a,attrs:{label:i.name,value:i.key}})})],2)],1),t("el-form-item",{attrs:{label:i.$t("m.Tag_Classification"),required:""}},[t("el-select",{staticStyle:{width:"150px"},attrs:{size:"small"},model:{value:i.tag.tcid,callback:function(t){i.$set(i.tag,"tcid",t)},expression:"tag.tcid"}},[i._l(i.chooseTagClassificationList,function(i,a){return t("el-option",{key:a,attrs:{label:i.name,value:i.id}})}),t("el-option",{attrs:{label:i.$t("m.Unclassified"),value:null}})],2)],1),t("el-form-item",{staticStyle:{"text-align":"center"}},[t("el-button",{attrs:{type:"primary",loading:i.upsertTagLoading},on:{click:i.upsertTag}},[i._v(i._s(i.$t("m."+i.upsertTagBtn))+" ")])],1)],1)],1),t("el-dialog",{attrs:{title:i.$t("m."+i.upsertTagClassificationTitle),width:"350px",visible:i.addTagClassificationDialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){i.addTagClassificationDialogVisible=t}}},[t("el-form",[t("el-form-item",{attrs:{label:i.$t("m.Tag_Classification_Name"),required:""}},[t("el-input",{attrs:{size:"small"},model:{value:i.tagClassification.name,callback:function(t){i.$set(i.tagClassification,"name",t)},expression:"tagClassification.name"}})],1),t("el-form-item",{attrs:{label:i.$t("m.Tag_Classification_Attribution"),required:""}},[t("el-select",{staticStyle:{width:"150px"},attrs:{size:"small",disabled:!0},model:{value:i.tagClassification.oj,callback:function(t){i.$set(i.tagClassification,"oj",t)},expression:"tagClassification.oj"}},[t("el-option",{attrs:{label:i.$t("m.My_OJ"),value:"ME"}}),i._l(i.REMOTE_OJ,function(i,a){return t("el-option",{key:a,attrs:{label:i.name,value:i.key}})})],2)],1),t("el-form-item",{attrs:{label:i.$t("m.Tag_Classification_Rank")}},[t("el-input-number",{attrs:{min:0,max:2147483647},model:{value:i.tagClassification.rank,callback:function(t){i.$set(i.tagClassification,"rank",t)},expression:"tagClassification.rank"}})],1),t("el-form-item",{staticStyle:{"text-align":"center"}},[t("el-button",{attrs:{type:"primary",loading:i.upsertTagClassificationLoading},on:{click:i.upsertTagClassification}},[i._v(i._s(i.$t("m."+i.upsertTagBtn))+" ")])],1)],1)],1)],1)},e=[],l=(a(52093),a(17932),a(86204),a(199)),n=a(27328),o=a(97889),c={data(){return{tagOj:"ME",REMOTE_OJ:{},getTagListLoading:!1,tagsAndClassificationList:[],tagClassificationList:[],chooseTagClassificationList:[],addTagDialogVisible:!1,upsertTagTitle:"Add_Tag",upsertTagBtn:"To_Add",upsertTagLoading:!1,tag:{id:null,name:null,color:null,oj:"ME",tcid:null},tagClassification:{id:null,name:null,rank:0,oj:"ME"},addTagClassificationDialogVisible:!1,upsertTagClassificationTitle:"Add_Tag_Classification",upsertTagClassificationLoading:!1,activeTagClassificationIdList:[-1]}},mounted(){this.REMOTE_OJ=Object.assign({},o.Hd),this.init()},methods:{init(){this.getTagClassification(),this.getProblemTagsAndClassification()},getProblemTagsAndClassification(){this.getTagListLoading=!0,n.A.getProblemTagsAndClassification(this.tagOj).then(i=>{this.tagsAndClassificationList=i.data.data,this.getTagListLoading=!1},i=>{this.getTagListLoading=!1})},deleteTag(i){this.$confirm(this.$i18n.t("m.Delete_Tag_Tips"),"Tips",{type:"warning"}).then(()=>{n.A.admin_deleteTag(i.id).then(i=>{l.A.success(this.$i18n.t("m.Delete_successfully")),this.getProblemTagsAndClassification()}).catch(()=>{})},()=>{})},openTagDialog(i,t,a=null){"add"==i?(this.upsertTagTitle="Add_Tag",this.upsertTagBtn="To_Add",this.tag={id:null,name:null,color:null,oj:this.tagOj,tcid:null==a?null:a.id}):(this.upsertTagTitle="Update_Tag",this.upsertTagBtn="To_Update",this.tag=Object.assign({},t)),this.addTagDialogVisible=!0},upsertTag(){this.tag.id?(this.upsertTagLoading=!0,n.A.admin_updateTag(this.tag).then(i=>{this.upsertTagLoading=!1,l.A.success(this.$i18n.t("m.Update_Successfully")),this.addTagDialogVisible=!1,this.getProblemTagsAndClassification()},i=>{this.upsertTagLoading=!1})):(this.upsertTagLoading=!0,n.A.admin_addTag(this.tag).then(i=>{this.upsertTagLoading=!1,l.A.success(this.$i18n.t("m.Add_Successfully")),this.addTagDialogVisible=!1,this.getProblemTagsAndClassification()},i=>{this.upsertTagLoading=!1}))},getTagClassification(){n.A.admin_getTagClassification(this.tagOj).then(i=>{this.tagClassificationList=i.data.data,this.chooseTagClassificationList=this.tagClassificationList.filter(i=>i.oj==this.tag.oj)})},upsertTagClassification(){this.tagClassification.id?(this.upsertTagClassificationLoading=!0,n.A.admin_updateTagClassification(this.tagClassification).then(i=>{this.upsertTagClassificationLoading=!1,l.A.success(this.$i18n.t("m.Update_Successfully")),this.addTagClassificationDialogVisible=!1,this.getProblemTagsAndClassification()},i=>{this.upsertTagClassificationLoading=!1})):(this.upsertTagClassificationLoading=!0,n.A.admin_addTagClassification(this.tagClassification).then(i=>{this.upsertTagClassificationLoading=!1,l.A.success(this.$i18n.t("m.Add_Successfully")),this.tagsAndClassificationList.unshift({classification:i.data.data,tagList:[]}),this.chooseTagClassificationList.push(i.data.data),this.addTagClassificationDialogVisible=!1},i=>{this.upsertTagClassificationLoading=!1}))},deleteTagClassification(i){this.$confirm(this.$i18n.t("m.Delete_Tag_Classification_Tips"),"Tips",{type:"warning"}).then(()=>{n.A.admin_deleteTagClassification(i.id).then(i=>{l.A.success(this.$i18n.t("m.Delete_successfully")),this.getProblemTagsAndClassification()}).catch(()=>{})},()=>{})},openTagClassificationDialog(i,t){"add"==i?(this.upsertTagClassificationTitle="Add_Tag_Classification",this.upsertTagBtn="To_Add",this.tagClassification={id:null,name:null,rank:0,oj:this.tagOj}):(this.upsertTagClassificationTitle="Update_Tag_Classification",this.upsertTagBtn="To_Update",this.tagClassification=Object.assign({},t)),this.addTagClassificationDialogVisible=!0}},watch:{"tag.oj"(i){this.chooseTagClassificationList=this.tagClassificationList.filter(t=>t.oj==i),this.tag.tcid=null}}},g=c,r=a(37419),d=(0,r.A)(g,s,e,!1,null,"0bf198b8",null),u=d.exports}}]);